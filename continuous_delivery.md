## 持续交付

### 1. 版本控制系统

版本控制系统又称源代码管理系统，是指一种记录一个或若干文件内容变化，以便将来查阅特定版本修订情况的系统。

#### 名词解释

1. 复刻（Fork）：复刻是指在软件开发中，开发者为一个版本仓库创建一份拷贝，并在拷贝上进行独立于源版本仓库的开发，从而分离出一个新的软件副本的活动。复刻不仅仅创建了一个分支，还将软件开发活动与源版本库分离开来。

2. 合并（Merge）： 是指当一个版本在多个独立分支中被修改后如何合并这些修改成为同一个版本的操作。

3. 合并评审（Merge Requests）：是指在合并之前，允许多人对合并时所提交的变更内容进行代码审查，并给予合并意见的过程。

4.  基线： 基线是版本仓库中每个版本在特定时期的一个“快照”。它提供一个正式标准，随后的工作基于此标准，并且只有经过授权后才能变更这个标准。建立一个初始基线后，以后每次对其进行的变更都将记录为一个差值，直到建成下一个基线。

5. 代码审查（Code Review）：是指对计算机源代码系统化地审查，常用软件同行评审的方式进行，其目的是在找出及修正在软件开发初期未发现的错误，提升软件质量及开发者的技术。代码审查常以不同的形式进行，例如结对编程、非正式的看过整个代码等。

#### 4.1 版本仓库（Repositories)

版本仓库又称源代码仓库，被用来存储源代码等版本文件。

##### 应包含以下基本功能：

——对版本仓库添加描述和标识

——浏览和查阅版本仓库

——复刻版本仓库

——归档版本仓库

——将版本仓库下载到本地

——将本地版本提交到版本仓库

——为版本仓库上指定成员，并根据可访问、可读取、可写入等不同能力将成员划分为管理员、负责人、开发者、协作者等不同角色

##### 可以包含以下高级功能：

——建立团队或路径，并在其中指派不同角色的成员，将版本仓库按一定模式归类存放

——更改版本仓库的可见性为全员共享或部分可见

——限制仓库总大小，限制仓库的单文件大小，对限制额度进行缩小或提额

#### 4.2 权限管理（Roles And Permissions）



##### 应包含以下基本功能：

——应能在不同对象上（如团队、项目等）定义人员角色

——可定义的人员角色应当包含管理员、负责人、开发者、协作者等，并能将可访问、可读取、可写入等不同能力划分于不同的角色。

#### 4.3 分支管理（Branching）

##### 应包含以下基本功能：

——创建和删除分支

——浏览和查阅分支

——根据分支查看变更历史

——查看分支对应的版本文件

——能够在分支上定义合并策略，限制不同开发人员在分支上的合并权限

##### 可以包含以下高级功能：

——定义分支创建规则，对分支的创建进行限定

——对分支增加描述和分类

——在分支上定义角色，指认分支的管理员，定义读取、写入和合并权限

#### 4.4 变更与合并管理（Committing And Merging）

##### 应包含以下基本功能：

——将本地修改提交到版本仓库，完成变更

——查看某个变更的当前全部版本文件，并将版本文件拉取到本地

——查看一次变更或多次变更的文件差异

——对比两个不同变更之间的文件差异

——查看变更的历史记录以及变更之间的关联关系

——将某个或多个关联变更回滚至之前状态

——将某个变更标识为Tag，并作为基线管理

——变更被提交时，提供Hooks用于出发自动化集成和检测

——将一个或多个变更创建为合并评审，用于合并到待合并分支，并可设置经过评审后才可合并

——查看合并评审的历史列表，以及每个合并评审引入的变更

##### 可以包含以下高级功能：

——查看变更与分支的关联关系

——针对变更进行讨论

——合并评审可根据代码扫描、持续集成与自动化测试系统反馈情况，阻止有风险的版本合入

#### 4.5 基线管理（Baseline Management）

##### 应包含以下基本功能：

——查看基线列表

——从指定的变更创建基线

——将本地创建的基线同步到版本仓库

——在版本仓库中删除基线

——查看基线对应的版本文件，并能将对应的版本文件下载到本地

——查看不同基线间、变更与基线间、分支与基线间的文件差异

##### 可以包含以下高级功能：

——能根据版本仓库的成员权限对基线的创建进行限制

——能在版本仓库定义基线的命名规则，避免不符合规则的基线创建

#### 4.6 代码审查（Code Review）

##### 应包含以下基本功能：

——能够对变更和待合并的变更发起审查，邀请审查人查看相应的版本差异

——能够对差异的代码行进行标注和讨论

——审查人能够在不同时间和地点浏览审查，并给出意见

##### 可以包含以下高级功能：

——能够对代码审查进行数据度量

——代码审查流程通知可与主流的即时通讯服务或团队协作工具集成，而提供实时的消息通知

——代码审查流程能够在移动终端进行查阅、讨论并完成相关审批



#### 4.7 存储和备份（Storage And Backup）

##### 应包含以下基本功能：

版本管理系统应对版本仓库提供稳定可靠的存储和备份方案：

——同一个版本仓库能够支持多份存储写入，当存储故障时可切换备份存储

——提供实时和定时的备份机制，可使用备份还原版本仓库

##### 可以包含以下高级功能：

——同一个版本仓库能够提供多地存储

——在有多地访问需求时，能提供就近访问

——大量复刻并修改同一版本仓库时，能让存储容量不随复刻数线性增长

——支持使用通用的文件存储系统（如x86平台的存储系统）

 

#### 4.8 安全保障（Security Management）

##### 应包含以下基本功能：

——应唯一确定访问账号身份

——保证无法越权访问

——能够保留访问记录，用于查阅回溯

——应保留危险操作记录，用于审计回溯

——应支持如https / SSH等加密传输方式，保证传输过程的网络包被截获后无法轻易解密。

#### 4.9 集成能力（Integrations）

##### 应包含以下基本功能：

版本控制系统应具备与需求敏捷、持续集成、持续交付、代码检测、自动化测试等工具集成的能力：

——应为变更、合并和评审提供Hook，用于触发自动化流程

——应提供CI/CD中基本功能的API，用于其他系统调用接入

##### 可以包含以下高级功能：

——支持OAuth等安全的三方认证能力，保证需求敏捷、持续集成、持续交付、代码检测、自动化测试等工具在访问版本资源时，访问权限受到当前操作人角色权限的限制

——提供研发生命周期中所需功能的API，用于其它系统深度集成

#### 4.10　其他能力（Others）

##### 应包含以下基本功能：

——可提供项目维度和团队维度的动态墙用于汇聚研发过程有关的消息和事件，使用会话的形式聚合研发过程中发生的事件与关键结点，并可使用移动终端查阅。

——会话墙能力可允许需求敏捷、持续集成、持续交付、代码检测、自动化测试等工具调用。

### 2. 构建管理

构建是指从代码或其它产物构建出指定输出物的过程，构建管理是指管理以上过程涉及的任务、过程、策略和环境等必要因素。

##### 应包含以下基本功能：

——通过配置模板或脚本初始化构建环境。

——通过配置模板或脚本定义构建任务。

——初始化环境和构建任务的配置模板或脚本的存储有版本管理，可配置标签。

——构建过程的输出可重定向到文件或日志服务，能够持久化存户和查询。

——构建过程可以设定执行时间，针对超时的情况可设定超时策略。

——构建过程的输出物设定输出地点、传输协议，针对输出失败的情况设定失败策略。

——构建过程的触发支持通过 HTTP RESTFUL 、GRPC 等多种方式触发任务执行。

——构建过程的结果可设定多中通知策略，支持 Email、IM 等。

##### 可以包含以下高级功能：

——管理构建资源，针对构建任务设定优先级进行调度。

——能使用分布式系统管理构建任务。



### 3. 持续集成

持续集成是指通过源代码构建软件的流程。

##### 应包含以下基本功能：

——xxxx

——xxxx

##### 可以包含以下高级功能：

——xxxx

——xxxx



### 4. 流水线

流水线是xxxx。

##### 应包含以下基本功能：

——xxxx

——xxxx

##### 可以包含以下高级功能：

——xxxx

——xxxx



### 5. 制品管理

制品管理是xxxx。

##### 应包含以下基本功能：

——xxxx

——xxxx

##### 可以包含以下高级功能：

——xxxx

——xxxx



### 6. 部署管理

部署管理是xxxx。

##### 应包含以下基本功能：

——xxxx

——xxxx

##### 可以包含以下高级功能：

——xxxx

——xxxx



### 7. 发布管理

发布管理是xxxx。

##### 应包含以下基本功能：

——xxxx

——xxxx

##### 可以包含以下高级功能：

——xxxx

——xxxx



### 8. 环境管理

环境管理是xxxx。

##### 应包含以下基本功能：

——xxxx

——xxxx

##### 可以包含以下高级功能：

——xxxx

——xxxx



### 9. 数据管理

数据管理是xxxx。

##### 应包含以下基本功能：

——xxxx

——xxxx

##### 可以包含以下高级功能：

——xxxx

——xxxx

### 10. 应用配置管理

应用配置管理是xxxx。

##### 应包含以下基本功能：

——xxxx

——xxxx

##### 可以包含以下高级功能：

——xxxx

——xxxx